=== RUN   TestHandleFace_Direction
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='face'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='face', Target='0x140001a94a0', Recipient='<nil>'
--- PASS: TestHandleFace_Direction (0.00s)
=== RUN   TestHandleFace_Status
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='face', Action='face'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='face', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleFace_Status (0.00s)
=== RUN   TestHandleFace_InvalidDirection
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='face'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='face', Target='0x140001a9710', Recipient='<nil>'
--- PASS: TestHandleFace_InvalidDirection (0.00s)
=== RUN   TestHandleFace_ImplicitText
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='face north', Action='face'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='face', Target='0x140001a98b0', Recipient='<nil>'
--- PASS: TestHandleFace_ImplicitText (0.00s)
=== RUN   TestHandleLobby_Success
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='lobby'
    lobby_handler_test.go:53: 
        	Error Trace:	/Users/walker/git/thousand-worlds/mud-platform-backend/internal/game/processor/lobby_handler_test.go:53
        	Error:      	Not equal: 
        	            	expected: 500
        	            	actual  : 5
        	Test:       	TestHandleLobby_Success
    lobby_handler_test.go:54: 
        	Error Trace:	/Users/walker/git/thousand-worlds/mud-platform-backend/internal/game/processor/lobby_handler_test.go:54
        	Error:      	Not equal: 
        	            	expected: 500
        	            	actual  : 2
        	Test:       	TestHandleLobby_Success
--- FAIL: TestHandleLobby_Success (0.00s)
=== RUN   TestHandleLobby_AlreadyInLobby
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='lobby'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='lobby', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleLobby_AlreadyInLobby (0.00s)
=== RUN   TestHandleLobby_WatcherRemoval
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='lobby'
--- PASS: TestHandleLobby_WatcherRemoval (0.00s)
=== RUN   TestHandleWatcher
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='watcher'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='watcher', Target='0x140001a9c80', Recipient='<nil>'
--- PASS: TestHandleWatcher (0.00s)
=== RUN   TestCardinalDirections
=== RUN   TestCardinalDirections/north
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='north'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='north', Target='<nil>', Recipient='<nil>'
=== RUN   TestCardinalDirections/n
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='n'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='n', Target='<nil>', Recipient='<nil>'
=== RUN   TestCardinalDirections/east
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='east'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='east', Target='<nil>', Recipient='<nil>'
=== RUN   TestCardinalDirections/e
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='e'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='e', Target='<nil>', Recipient='<nil>'
=== RUN   TestCardinalDirections/south
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='south'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='south', Target='<nil>', Recipient='<nil>'
=== RUN   TestCardinalDirections/s
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='s'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='s', Target='<nil>', Recipient='<nil>'
=== RUN   TestCardinalDirections/west
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='west'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='west', Target='<nil>', Recipient='<nil>'
=== RUN   TestCardinalDirections/w
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='w'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='w', Target='<nil>', Recipient='<nil>'
--- PASS: TestCardinalDirections (0.00s)
    --- PASS: TestCardinalDirections/north (0.00s)
    --- PASS: TestCardinalDirections/n (0.00s)
    --- PASS: TestCardinalDirections/east (0.00s)
    --- PASS: TestCardinalDirections/e (0.00s)
    --- PASS: TestCardinalDirections/south (0.00s)
    --- PASS: TestCardinalDirections/s (0.00s)
    --- PASS: TestCardinalDirections/west (0.00s)
    --- PASS: TestCardinalDirections/w (0.00s)
=== RUN   TestHandleOpen_Door
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='open'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='open', Target='0x140002ca330', Recipient='<nil>'
--- PASS: TestHandleOpen_Door (0.00s)
=== RUN   TestHandleOpen_Container
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='open'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='open', Target='0x140002ca3d0', Recipient='<nil>'
--- PASS: TestHandleOpen_Container (0.00s)
=== RUN   TestHandleOpen_NoTarget
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='open'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='open', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleOpen_NoTarget (0.00s)
=== RUN   TestHandleEnter_Portal
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='enter'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='enter', Target='0x140002ca500', Recipient='<nil>'
--- PASS: TestHandleEnter_Portal (0.00s)
=== RUN   TestHandleEnter_Doorway
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='enter'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='enter', Target='0x140002ca5b0', Recipient='<nil>'
--- PASS: TestHandleEnter_Doorway (0.00s)
=== RUN   TestHandleEnter_NoTarget
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='enter'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='enter', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleEnter_NoTarget (0.00s)
=== RUN   TestHandleSay_BroadcastsMessage
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='say'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='say', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleSay_BroadcastsMessage (0.00s)
=== RUN   TestHandleSay_NoMessage
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='say'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='say', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleSay_NoMessage (0.00s)
=== RUN   TestHandleWhisper_ToNearbyPlayer
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='whisper'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='whisper', Target='<nil>', Recipient='0x140002ca8c0'
--- PASS: TestHandleWhisper_ToNearbyPlayer (0.00s)
=== RUN   TestHandleWhisper_NoRecipient
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='whisper'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='whisper', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleWhisper_NoRecipient (0.00s)
=== RUN   TestHandleWhisper_NoMessage
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='whisper'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='whisper', Target='<nil>', Recipient='0x140002caa10'
--- PASS: TestHandleWhisper_NoMessage (0.00s)
=== RUN   TestHandleTell_OnlinePlayer
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='tell'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='tell', Target='<nil>', Recipient='0x140002caab0'
--- PASS: TestHandleTell_OnlinePlayer (0.00s)
=== RUN   TestHandleTell_NoRecipient
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='tell'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='tell', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleTell_NoRecipient (0.00s)
=== RUN   TestHandleTell_NoMessage
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='tell'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='tell', Target='<nil>', Recipient='0x140002cac20'
--- PASS: TestHandleTell_NoMessage (0.00s)
=== RUN   TestHandleWho_ListsPlayers
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='who'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='who', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleWho_ListsPlayers (0.00s)
=== RUN   TestHandleWho_NoHub
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='who'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='who', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleWho_NoHub (0.00s)
=== RUN   TestHandleHelp
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='help'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='help', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleHelp (0.00s)
=== RUN   TestHandleLook_NoTarget
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='look'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='look', Target='<nil>', Recipient='<nil>'
2025/12/09 13:05:37 [PROCESSOR] Failed to generate lobby description: failed to get user: user not found
--- PASS: TestHandleLook_NoTarget (0.00s)
=== RUN   TestHandleLook_WithTarget
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='look'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='look', Target='0x140002caf40', Recipient='<nil>'
--- PASS: TestHandleLook_WithTarget (0.00s)
=== RUN   TestHandleTake
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='take'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='take', Target='0x140002cb000', Recipient='<nil>'
--- PASS: TestHandleTake (0.00s)
=== RUN   TestHandleTake_NoTarget
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='take'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='take', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleTake_NoTarget (0.00s)
=== RUN   TestHandleDrop
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='drop'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='drop', Target='0x140002cb130', Recipient='<nil>'
--- PASS: TestHandleDrop (0.00s)
=== RUN   TestHandleDrop_NoTarget
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='drop'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='drop', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleDrop_NoTarget (0.00s)
=== RUN   TestHandleAttack
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='attack'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='attack', Target='0x140002cb260', Recipient='<nil>'
--- PASS: TestHandleAttack (0.00s)
=== RUN   TestHandleAttack_NoTarget
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='attack'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='attack', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleAttack_NoTarget (0.00s)
=== RUN   TestHandleTalk
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='talk'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='talk', Target='0x140002cb390', Recipient='<nil>'
--- PASS: TestHandleTalk (0.00s)
=== RUN   TestHandleTalk_NoTarget
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='talk'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='talk', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleTalk_NoTarget (0.00s)
=== RUN   TestHandleInventory
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='inventory'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='inventory', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleInventory (0.00s)
=== RUN   TestHandleCraft
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='craft'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='craft', Target='0x140002cb550', Recipient='<nil>'
--- PASS: TestHandleCraft (0.00s)
=== RUN   TestHandleCraft_NoTarget
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='craft'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='craft', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleCraft_NoTarget (0.00s)
=== RUN   TestHandleUse
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='use'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='use', Target='0x140002cb680', Recipient='<nil>'
--- PASS: TestHandleUse (0.00s)
=== RUN   TestHandleUse_NoTarget
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='use'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='use', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleUse_NoTarget (0.00s)
=== RUN   TestInvalidCommand
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='invalid_action'
2025/12/09 13:05:37 [LOBBY] Processing command: Action='invalid_action', Target='<nil>', Recipient='<nil>'
--- PASS: TestInvalidCommand (0.00s)
=== RUN   TestNoCharacter
2025/12/09 13:05:37 [PROCESSOR] ProcessCommand called with Text='', Action='north'
--- PASS: TestNoCharacter (0.00s)
=== RUN   TestHandleReply_NoMessage
2025/12/09 13:05:37 [LOBBY] Processing command: Action='reply', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleReply_NoMessage (0.00s)
=== RUN   TestHandleReply_NoPreviousTell
2025/12/09 13:05:37 [LOBBY] Processing command: Action='reply', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleReply_NoPreviousTell (0.00s)
=== RUN   TestHandleReply_SenderOffline
2025/12/09 13:05:37 [LOBBY] Processing command: Action='reply', Target='<nil>', Recipient='<nil>'
--- PASS: TestHandleReply_SenderOffline (0.00s)
=== RUN   TestHandleReply_ThreadSafe
--- PASS: TestHandleReply_ThreadSafe (0.00s)
FAIL
FAIL	mud-platform-backend/internal/game/processor	0.179s
FAIL
