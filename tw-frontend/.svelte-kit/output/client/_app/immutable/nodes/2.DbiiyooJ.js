import{s as ge,n as me,d as w,r as ve,a as X,b as j,c as l,i as $,e as s,l as H,p as _e,f as u,g as A,h as z,j as x,k as Y,m as d,o as I,t as Z,q as ye}from"../chunks/CNXArMli.js";import{S as we,i as Ce}from"../chunks/BWH_Fj_B.js";import{g as ne}from"../chunks/BZrBSvfc.js";import{g as Q}from"../chunks/DyiKixLh.js";function pe(a){let t,e;return{c(){t=d("div"),e=Z(a[4]),this.h()},l(r){t=u(r,"DIV",{class:!0});var i=A(t);e=Y(i,a[4]),i.forEach(w),this.h()},h(){l(t,"class","bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded mb-4")},m(r,i){$(r,t,i),s(t,e)},p(r,i){i&16&&X(e,r[4])},d(r){r&&w(t)}}}function he(a){let t,e,r="Username",i,n,v,m;return{c(){t=d("div"),e=d("label"),e.textContent=r,i=I(),n=d("input"),this.h()},l(f){t=u(f,"DIV",{});var _=A(t);e=u(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1yyjffa"&&(e.textContent=r),i=x(_),n=u(_,"INPUT",{id:!0,type:!0,minlength:!0,maxlength:!0,class:!0,placeholder:!0}),_.forEach(w),this.h()},h(){l(e,"for","username"),l(e,"class","block text-sm font-medium text-gray-300 mb-2"),l(n,"id","username"),l(n,"type","text"),n.required=!0,n.disabled=a[5],l(n,"minlength","3"),l(n,"maxlength","20"),l(n,"class","w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded text-gray-100 focus:outline-none focus:border-blue-500 disabled:opacity-50"),l(n,"placeholder","Username")},m(f,_){$(f,t,_),s(t,e),s(t,i),s(t,n),j(n,a[1]),v||(m=H(n,"input",a[9]),v=!0)},p(f,_){_&32&&(n.disabled=f[5]),_&2&&n.value!==f[1]&&j(n,f[1])},d(f){f&&w(t),v=!1,m()}}}function be(a){let t,e="Minimum 8 characters";return{c(){t=d("p"),t.textContent=e,this.h()},l(r){t=u(r,"P",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-79mfib"&&(t.textContent=e),this.h()},h(){l(t,"class","text-xs text-gray-400 mt-1")},m(r,i){$(r,t,i)},d(r){r&&w(t)}}}function Ee(a){let t,e,r,i="Thousand Worlds",n,v,m=a[3]?"Sign In":"Create Account",f,_,q,p,L,k,C="Email",B,E,ee,R,P,U,oe="Password",te,h,W,le,re,D,F=a[5]?"Please wait...":a[3]?"Sign In":"Create Account",G,ae,M,T,O=a[3]?"Don't have an account? Sign up":"Already have an account? Sign in",J,se,ie,b=a[4]&&pe(a),g=!a[3]&&he(a),y=!a[3]&&be();return{c(){t=d("div"),e=d("div"),r=d("h1"),r.textContent=i,n=I(),v=d("h2"),f=Z(m),_=I(),b&&b.c(),q=I(),p=d("form"),L=d("div"),k=d("label"),k.textContent=C,B=I(),E=d("input"),ee=I(),g&&g.c(),R=I(),P=d("div"),U=d("label"),U.textContent=oe,te=I(),h=d("input"),le=I(),y&&y.c(),re=I(),D=d("button"),G=Z(F),ae=I(),M=d("div"),T=d("button"),J=Z(O),this.h()},l(o){t=u(o,"DIV",{class:!0});var c=A(t);e=u(c,"DIV",{class:!0});var S=A(e);r=u(S,"H1",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-622iwc"&&(r.textContent=i),n=x(S),v=u(S,"H2",{class:!0});var ue=A(v);f=Y(ue,m),ue.forEach(w),_=x(S),b&&b.l(S),q=x(S),p=u(S,"FORM",{class:!0});var V=A(p);L=u(V,"DIV",{});var K=A(L);k=u(K,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(k)!=="svelte-6hciz4"&&(k.textContent=C),B=x(K),E=u(K,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),K.forEach(w),ee=x(V),g&&g.l(V),R=x(V),P=u(V,"DIV",{});var N=A(P);U=u(N,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(U)!=="svelte-phjo48"&&(U.textContent=oe),te=x(N),h=u(N,"INPUT",{id:!0,type:!0,minlength:!0,class:!0,placeholder:!0}),le=x(N),y&&y.l(N),N.forEach(w),re=x(V),D=u(V,"BUTTON",{type:!0,class:!0});var de=A(D);G=Y(de,F),de.forEach(w),V.forEach(w),ae=x(S),M=u(S,"DIV",{class:!0});var fe=A(M);T=u(fe,"BUTTON",{class:!0});var ce=A(T);J=Y(ce,O),ce.forEach(w),fe.forEach(w),S.forEach(w),c.forEach(w),this.h()},h(){l(r,"class","text-3xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500"),l(v,"class","text-xl font-semibold text-gray-100 mb-6 text-center"),l(k,"for","email"),l(k,"class","block text-sm font-medium text-gray-300 mb-2"),l(E,"id","email"),l(E,"type","email"),E.required=!0,E.disabled=a[5],l(E,"class","w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded text-gray-100 focus:outline-none focus:border-blue-500 disabled:opacity-50"),l(E,"placeholder","your@email.com"),l(U,"for","password"),l(U,"class","block text-sm font-medium text-gray-300 mb-2"),l(h,"id","password"),l(h,"type","password"),h.required=!0,h.disabled=a[5],l(h,"minlength",W=a[3]?void 0:8),l(h,"class","w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded text-gray-100 focus:outline-none focus:border-blue-500 disabled:opacity-50"),l(h,"placeholder","••••••••"),l(D,"type","submit"),D.disabled=a[5],l(D,"class","w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-3 px-4 rounded transition-all disabled:opacity-50 disabled:cursor-not-allowed"),l(p,"class","space-y-4"),T.disabled=a[5],l(T,"class","text-blue-400 hover:text-blue-300 text-sm transition-colors disabled:opacity-50"),l(M,"class","mt-6 text-center"),l(e,"class","bg-gray-800 p-8 rounded-lg shadow-2xl w-full max-w-md border border-gray-700"),l(t,"class","min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900")},m(o,c){$(o,t,c),s(t,e),s(e,r),s(e,n),s(e,v),s(v,f),s(e,_),b&&b.m(e,null),s(e,q),s(e,p),s(p,L),s(L,k),s(L,B),s(L,E),j(E,a[0]),s(p,ee),g&&g.m(p,null),s(p,R),s(p,P),s(P,U),s(P,te),s(P,h),j(h,a[2]),s(P,le),y&&y.m(P,null),s(p,re),s(p,D),s(D,G),s(e,ae),s(e,M),s(M,T),s(T,J),se||(ie=[H(E,"input",a[8]),H(h,"input",a[10]),H(p,"submit",_e(a[6])),H(T,"click",a[7])],se=!0)},p(o,[c]){c&8&&m!==(m=o[3]?"Sign In":"Create Account")&&X(f,m),o[4]?b?b.p(o,c):(b=pe(o),b.c(),b.m(e,q)):b&&(b.d(1),b=null),c&32&&(E.disabled=o[5]),c&1&&E.value!==o[0]&&j(E,o[0]),o[3]?g&&(g.d(1),g=null):g?g.p(o,c):(g=he(o),g.c(),g.m(p,R)),c&32&&(h.disabled=o[5]),c&8&&W!==(W=o[3]?void 0:8)&&l(h,"minlength",W),c&4&&h.value!==o[2]&&j(h,o[2]),o[3]?y&&(y.d(1),y=null):y||(y=be(),y.c(),y.m(P,null)),c&40&&F!==(F=o[5]?"Please wait...":o[3]?"Sign In":"Create Account")&&X(G,F),c&32&&(D.disabled=o[5]),c&8&&O!==(O=o[3]?"Don't have an account? Sign up":"Already have an account? Sign in")&&X(J,O),c&32&&(T.disabled=o[5])},i:me,o:me,d(o){o&&w(t),b&&b.d(),g&&g.d(),y&&y.d(),se=!1,ve(ie)}}}function xe(a,t,e){let r="",i="",n="",v=!0,m="",f=!1;ye(async()=>{try{await Q.getMe(),ne("/game")}catch{}});async function _(){e(4,m=""),e(5,f=!0);try{if(v){let C;try{C=await Q.login(r,n),console.log("Login successful")}catch(B){throw console.error("Login API error:",B),new Error(B.message||"Login failed")}ne("/game")}else await Q.register(r,i,n),await Q.login(r,n),ne("/game")}catch(C){console.error("Form submission error:",C),C.name==="AuthError"&&C.userFriendly?e(4,m=C.userFriendly.message):typeof C=="string"?e(4,m=C):C.message?e(4,m=C.message):e(4,m="An unexpected error occurred. Please try again.")}finally{e(5,f=!1)}}function q(){e(3,v=!v),e(4,m="")}function p(){r=this.value,e(0,r)}function L(){i=this.value,e(1,i)}function k(){n=this.value,e(2,n)}return[r,i,n,v,m,f,_,q,p,L,k]}class Se extends we{constructor(t){super(),Ce(this,t,xe,Ee,ge,{})}}export{Se as component};
