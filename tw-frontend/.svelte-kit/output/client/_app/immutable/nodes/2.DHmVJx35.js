import{s as ge,n as me,d as C,r as ve,a as X,b as N,c as l,i as $,e as a,l as O,p as _e,f as d,g as A,h as H,j as x,k as Y,m as f,o as I,t as Z,q as ye}from"../chunks/vUR8X68U.js";import{S as we,i as Ce}from"../chunks/BYitGVcx.js";import{g as ne}from"../chunks/Cn1zA9IX.js";import{g as Q}from"../chunks/wQArxclW.js";function pe(r){let t,e;return{c(){t=f("div"),e=Z(r[4]),this.h()},l(s){t=d(s,"DIV",{class:!0});var i=A(t);e=Y(i,r[4]),i.forEach(C),this.h()},h(){l(t,"class","bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded mb-4")},m(s,i){$(s,t,i),a(t,e)},p(s,i){i&16&&X(e,s[4])},d(s){s&&C(t)}}}function he(r){let t,e,s="Username",i,o,m,E;return{c(){t=f("div"),e=f("label"),e.textContent=s,i=I(),o=f("input"),this.h()},l(u){t=d(u,"DIV",{});var p=A(t);e=d(p,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1yyjffa"&&(e.textContent=s),i=x(p),o=d(p,"INPUT",{id:!0,type:!0,minlength:!0,maxlength:!0,class:!0,placeholder:!0}),p.forEach(C),this.h()},h(){l(e,"for","username"),l(e,"class","block text-sm font-medium text-gray-300 mb-2"),l(o,"id","username"),l(o,"type","text"),o.required=!0,o.disabled=r[5],l(o,"minlength","3"),l(o,"maxlength","20"),l(o,"class","w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded text-gray-100 focus:outline-none focus:border-blue-500 disabled:opacity-50"),l(o,"placeholder","Username")},m(u,p){$(u,t,p),a(t,e),a(t,i),a(t,o),N(o,r[1]),m||(E=O(o,"input",r[10]),m=!0)},p(u,p){p&32&&(o.disabled=u[5]),p&2&&o.value!==u[1]&&N(o,u[1])},d(u){u&&C(t),m=!1,E()}}}function be(r){let t,e="Minimum 8 characters";return{c(){t=f("p"),t.textContent=e,this.h()},l(s){t=d(s,"P",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-79mfib"&&(t.textContent=e),this.h()},h(){l(t,"class","text-xs text-gray-400 mt-1")},m(s,i){$(s,t,i)},d(s){s&&C(t)}}}function Ee(r){let t,e,s,i="Thousand Worlds",o,m,E=r[3]?"Sign In":"Create Account",u,p,q,g,L,k,z="Email",c,h,ee,R,P,U,oe="Password",te,v,W,le,re,D,j=r[5]?"Please wait...":r[3]?"Sign In":"Create Account",G,ae,B,T,F=r[3]?"Don't have an account? Sign up":"Already have an account? Sign in",J,se,ie,_=r[4]&&pe(r),y=!r[3]&&he(r),w=!r[3]&&be();return{c(){t=f("div"),e=f("div"),s=f("h1"),s.textContent=i,o=I(),m=f("h2"),u=Z(E),p=I(),_&&_.c(),q=I(),g=f("form"),L=f("div"),k=f("label"),k.textContent=z,c=I(),h=f("input"),ee=I(),y&&y.c(),R=I(),P=f("div"),U=f("label"),U.textContent=oe,te=I(),v=f("input"),le=I(),w&&w.c(),re=I(),D=f("button"),G=Z(j),ae=I(),B=f("div"),T=f("button"),J=Z(F),this.h()},l(n){t=d(n,"DIV",{class:!0});var b=A(t);e=d(b,"DIV",{class:!0});var S=A(e);s=d(S,"H1",{class:!0,"data-svelte-h":!0}),H(s)!=="svelte-622iwc"&&(s.textContent=i),o=x(S),m=d(S,"H2",{class:!0});var ue=A(m);u=Y(ue,E),ue.forEach(C),p=x(S),_&&_.l(S),q=x(S),g=d(S,"FORM",{class:!0});var V=A(g);L=d(V,"DIV",{});var K=A(L);k=d(K,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(k)!=="svelte-6hciz4"&&(k.textContent=z),c=x(K),h=d(K,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),K.forEach(C),ee=x(V),y&&y.l(V),R=x(V),P=d(V,"DIV",{});var M=A(P);U=d(M,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),H(U)!=="svelte-phjo48"&&(U.textContent=oe),te=x(M),v=d(M,"INPUT",{id:!0,type:!0,minlength:!0,class:!0,placeholder:!0}),le=x(M),w&&w.l(M),M.forEach(C),re=x(V),D=d(V,"BUTTON",{type:!0,class:!0});var de=A(D);G=Y(de,j),de.forEach(C),V.forEach(C),ae=x(S),B=d(S,"DIV",{class:!0});var fe=A(B);T=d(fe,"BUTTON",{class:!0});var ce=A(T);J=Y(ce,F),ce.forEach(C),fe.forEach(C),S.forEach(C),b.forEach(C),this.h()},h(){l(s,"class","text-3xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500"),l(m,"class","text-xl font-semibold text-gray-100 mb-6 text-center"),l(k,"for","email"),l(k,"class","block text-sm font-medium text-gray-300 mb-2"),l(h,"id","email"),l(h,"type","email"),h.required=!0,h.disabled=r[5],l(h,"class","w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded text-gray-100 focus:outline-none focus:border-blue-500 disabled:opacity-50"),l(h,"placeholder","your@email.com"),l(U,"for","password"),l(U,"class","block text-sm font-medium text-gray-300 mb-2"),l(v,"id","password"),l(v,"type","password"),v.required=!0,v.disabled=r[5],l(v,"minlength",W=r[3]?void 0:8),l(v,"class","w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded text-gray-100 focus:outline-none focus:border-blue-500 disabled:opacity-50"),l(v,"placeholder","••••••••"),l(D,"type","submit"),D.disabled=r[5],l(D,"class","w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-3 px-4 rounded transition-all disabled:opacity-50 disabled:cursor-not-allowed"),l(g,"class","space-y-4"),T.disabled=r[5],l(T,"class","text-blue-400 hover:text-blue-300 text-sm transition-colors disabled:opacity-50"),l(B,"class","mt-6 text-center"),l(e,"class","bg-gray-800 p-8 rounded-lg shadow-2xl w-full max-w-md border border-gray-700"),l(t,"class","min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900")},m(n,b){$(n,t,b),a(t,e),a(e,s),a(e,o),a(e,m),a(m,u),a(e,p),_&&_.m(e,null),a(e,q),a(e,g),a(g,L),a(L,k),a(L,c),a(L,h),N(h,r[0]),a(g,ee),y&&y.m(g,null),a(g,R),a(g,P),a(P,U),a(P,te),a(P,v),N(v,r[2]),a(P,le),w&&w.m(P,null),a(g,re),a(g,D),a(D,G),a(e,ae),a(e,B),a(B,T),a(T,J),se||(ie=[O(h,"input",r[9]),O(v,"input",r[11]),O(g,"submit",_e(r[6])),O(T,"click",r[7])],se=!0)},p(n,[b]){b&8&&E!==(E=n[3]?"Sign In":"Create Account")&&X(u,E),n[4]?_?_.p(n,b):(_=pe(n),_.c(),_.m(e,q)):_&&(_.d(1),_=null),b&32&&(h.disabled=n[5]),b&1&&h.value!==n[0]&&N(h,n[0]),n[3]?y&&(y.d(1),y=null):y?y.p(n,b):(y=he(n),y.c(),y.m(g,R)),b&32&&(v.disabled=n[5]),b&8&&W!==(W=n[3]?void 0:8)&&l(v,"minlength",W),b&4&&v.value!==n[2]&&N(v,n[2]),n[3]?w&&(w.d(1),w=null):w||(w=be(),w.c(),w.m(P,null)),b&40&&j!==(j=n[5]?"Please wait...":n[3]?"Sign In":"Create Account")&&X(G,j),b&32&&(D.disabled=n[5]),b&8&&F!==(F=n[3]?"Don't have an account? Sign up":"Already have an account? Sign in")&&X(J,F),b&32&&(T.disabled=n[5])},i:me,o:me,d(n){n&&C(t),_&&_.d(),y&&y.d(),w&&w.d(),se=!1,ve(ie)}}}function xe(r,t,e){let{params:s={}}=t,i="",o="",m="",E=!0,u="",p=!1;ye(async()=>{try{await Q.getMe(),ne("/game")}catch{}});async function q(){e(4,u=""),e(5,p=!0);try{if(E){let c;try{c=await Q.login(i,m),console.log("Login successful")}catch(h){throw console.error("Login API error:",h),new Error(h.message||"Login failed")}ne("/game")}else await Q.register(i,o,m),await Q.login(i,m),ne("/game")}catch(c){console.error("Form submission error:",c),c.name==="AuthError"&&c.userFriendly?e(4,u=c.userFriendly.message):typeof c=="string"?e(4,u=c):c.message?e(4,u=c.message):e(4,u="An unexpected error occurred. Please try again.")}finally{e(5,p=!1)}}function g(){e(3,E=!E),e(4,u="")}function L(){i=this.value,e(0,i)}function k(){o=this.value,e(1,o)}function z(){m=this.value,e(2,m)}return r.$$set=c=>{"params"in c&&e(8,s=c.params)},[i,o,m,E,u,p,q,g,s,L,k,z]}class Se extends we{constructor(t){super(),Ce(this,t,xe,Ee,ge,{params:8})}}export{Se as component};
